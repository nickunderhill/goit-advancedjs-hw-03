{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/js/main.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.headers.common[\"x-api-key\"] = \"live_zOF9vaVYvRLCPyKToIzWhj09cqgYYpxHWkm34YngZLYhyG9MTetGTjwduOAth2Cz\";\n\nconst errorMessage = 'Oops! Something went wrong! Try realoding the page!';\nconst baseUrl = 'https://api.thecatapi.com/v1';\n\nexport async function fetchBreeds() {\n    try {\n      const response = await axios.get(`${baseUrl}/breeds`);\n      return response.data;\n    } catch (error) {\n      throw new Error(errorMessage);\n    }\n  }\n  \nexport async function fetchCatByBreed(breedId) {\n    try {\n      const response = await axios.get(`${baseUrl}/images/search?breed_ids=${breedId}`);\n      return response.data;\n    } catch (error) {\n      throw new Error(errorMessage);\n    }\n  }","import { fetchBreeds, fetchCatByBreed } from './cat-api.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SlimSelect from 'slim-select';\n\nconst breedSelect = document.getElementById('breed-select');\nconst loader = document.querySelector('.loader');\nconst catInfo = document.querySelector('.cat-info');\nconst errorElement = document.querySelector('.error');\n\nasync function loadBreeds() {\n  loader.classList.remove('hidden');\n  breedSelect.classList.add('hidden');\n  try {\n    const breeds = await fetchBreeds();\n    var options = breeds.map(({ id, name }) => ({ text: name, value: id }));\n    new SlimSelect({\n      select: '#breed-select',\n      data: [\n        {\n          placeholder: true,\n          text: 'Select breed',\n        },\n        ...options,\n      ],\n      events: {\n        afterChange: handleChangeSelect,\n      },\n    });\n    breedSelect.classList.remove('hidden');\n  } catch (error) {\n    showError(error.message);\n  } finally {\n    loader.classList.add('hidden');\n  }\n}\n\nasync function loadCatInfo(breedId) {\n  loader.classList.remove('hidden');\n  catInfo.classList.add('hidden');\n  errorElement.classList.add('hidden');\n  try {\n    catInfo.classList.add('hidden');\n    const [cat] = await fetchCatByBreed(breedId);\n    displayCatInfo(cat);\n  } catch (error) {\n    showError(error.message);\n  } finally {\n    loader.classList.add('hidden');\n  }\n}\n\nfunction displayCatInfo(cat) {\n  try {\n    var { url, breeds } = cat;\n    var breed = breeds[0];\n    catInfo.innerHTML = `\n          <img src=\"${url}\" alt=\"${breed.name}\">\n          <div class=\"cat-info-text\">\n              <h2>${breed.name}</h2>\n              <p>${breed.description}</p>\n              <p><strong>Temperament:</strong> ${breed.temperament}</p>\n          </div>\n      `;\n    catInfo.classList.remove('hidden');\n  } catch (error) {\n    showError(\n      'We cannot find information on this breed. Please check other breeds!'\n    );\n    console.log(error);\n  }\n}\n\nfunction showError(message) {\n  errorElement.textContent = message;\n  errorElement.classList.remove('hidden');\n  iziToast.error({ title: 'Error', message });\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  loadBreeds();\n});\n\nconst handleChangeSelect = event => {\n  const breedId = event[0].value;\n  if (breedId) {\n    loadCatInfo(breedId);\n  }\n};\n"],"names":["axios","errorMessage","baseUrl","fetchBreeds","fetchCatByBreed","breedId","breedSelect","loader","catInfo","errorElement","loadBreeds","options","id","name","SlimSelect","handleChangeSelect","error","showError","loadCatInfo","cat","displayCatInfo","url","breeds","breed","message","iziToast","event"],"mappings":"owBAEAA,EAAM,SAAS,QAAQ,OAAO,WAAW,EAAI,wEAE7C,MAAMC,EAAe,sDACfC,EAAU,+BAET,eAAeC,GAAc,CAChC,GAAI,CAEF,OADiB,MAAMH,EAAM,IAAI,GAAGE,CAAO,SAAS,GACpC,IACjB,MAAe,CACd,MAAM,IAAI,MAAMD,CAAY,CAC7B,CACF,CAEI,eAAeG,EAAgBC,EAAS,CAC3C,GAAI,CAEF,OADiB,MAAML,EAAM,IAAI,GAAGE,CAAO,4BAA4BG,CAAO,EAAE,GAChE,IACjB,MAAe,CACd,MAAM,IAAI,MAAMJ,CAAY,CAC7B,CACL,CCjBA,MAAMK,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAe,SAAS,cAAc,QAAQ,EAEpD,eAAeC,GAAa,CAC1BH,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAY,UAAU,IAAI,QAAQ,EAClC,GAAI,CAEF,IAAIK,GADW,MAAMR,KACA,IAAI,CAAC,CAAE,GAAAS,EAAI,KAAAC,MAAY,CAAE,KAAMA,EAAM,MAAOD,CAAE,EAAG,EACtE,IAAIE,EAAW,CACb,OAAQ,gBACR,KAAM,CACJ,CACE,YAAa,GACb,KAAM,cACP,EACD,GAAGH,CACJ,EACD,OAAQ,CACN,YAAaI,CACd,CACP,CAAK,EACDT,EAAY,UAAU,OAAO,QAAQ,CACtC,OAAQU,EAAO,CACdC,EAAUD,EAAM,OAAO,CAC3B,QAAY,CACRT,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACH,CAEA,eAAeW,EAAYb,EAAS,CAClCE,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAQ,UAAU,IAAI,QAAQ,EAC9BC,EAAa,UAAU,IAAI,QAAQ,EACnC,GAAI,CACFD,EAAQ,UAAU,IAAI,QAAQ,EAC9B,KAAM,CAACW,CAAG,EAAI,MAAMf,EAAgBC,CAAO,EAC3Ce,EAAeD,CAAG,CACnB,OAAQH,EAAO,CACdC,EAAUD,EAAM,OAAO,CAC3B,QAAY,CACRT,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACH,CAEA,SAASa,EAAeD,EAAK,CAC3B,GAAI,CACF,GAAI,CAAE,IAAAE,EAAK,OAAAC,CAAQ,EAAGH,EAClBI,EAAQD,EAAO,CAAC,EACpBd,EAAQ,UAAY;AAAA,sBACFa,CAAG,UAAUE,EAAM,IAAI;AAAA;AAAA,oBAEzBA,EAAM,IAAI;AAAA,mBACXA,EAAM,WAAW;AAAA,iDACaA,EAAM,WAAW;AAAA;AAAA,QAG9Df,EAAQ,UAAU,OAAO,QAAQ,CAClC,OAAQQ,EAAO,CACdC,EACE,sEACN,EACI,QAAQ,IAAID,CAAK,CAClB,CACH,CAEA,SAASC,EAAUO,EAAS,CAC1Bf,EAAa,YAAce,EAC3Bf,EAAa,UAAU,OAAO,QAAQ,EACtCgB,EAAS,MAAM,CAAE,MAAO,QAAS,QAAAD,CAAS,CAAA,CAC5C,CAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDd,GACF,CAAC,EAED,MAAMK,EAAqBW,GAAS,CAClC,MAAMrB,EAAUqB,EAAM,CAAC,EAAE,MACrBrB,GACFa,EAAYb,CAAO,CAEvB"}